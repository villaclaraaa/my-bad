<div class="flex flex-col md:flex-row w-full gap-4">

  <!-- LEFT: 1/3 on desktop, full on mobile -->
  <div class="w-full md:w-2/5 flex flex-col gap-4" [ngClass]="activeTab() == 'none' ? 'mx-auto' : ''">
    <!-- Search box -->
    <!-- Search box -->
    <div class="flex items-center gap-3 bg-slate-600 mx-1 md:mx-4 p-1 mt-4 md:mt-2 rounded-lg shadow-lg w-full">

      <!-- Flexible input -->
      <input type="text" [(ngModel)]="searchQuery" placeholder="Search account…" class=" min-w-0 px-3 py-1 bg-slate-700 text-gray-200 placeholder-gray-400
           rounded-md border border-slate-600
           focus:outline-none focus:ring-2 focus:ring-blue-400" />

      <!-- Fixed or flexible button -->
      <button (click)="searchAccount()" class="px-4 md:px-6 py-1 bg-blue-500 text-white rounded-md
           hover:bg-blue-600 active:scale-95 transition-all cursor-pointer flex-shrink-0">
        ➜
      </button>

      <!-- Account + Avatar -->
      <div class="flex items-center gap-2 text-white px-1 flex-shrink-0">
        <div *ngIf="avatarUrl">
          <img src="{{avatarUrl}}" alt="Player avatar" class="h-6 w-6 rounded-full object-cover" />
        </div>
        <div class="whitespace-nowrap">
          <span class="font-semibold">Account: </span>
          <span>{{ accountName || 'None' }}</span>
        </div>
      </div>

    </div>

  </div>

  <div class="w-full md:w-3/5 flex flex-col gap-4" *ngIf="!(activeTab() == 'none')">
    <app-tabsmenu [tabs]="[
        { key: 'map', label: 'Map' },
        { key: 'efficiency', label: 'Efficiency' }
      ]" [activeTab]="activeTab()" (activeTabChange)="activeTab.set($event)">
    </app-tabsmenu>
  </div>

</div>

<div class="relative flex-1">

  <ng-container [ngSwitch]="activeTab()">
    <div *ngSwitchCase="'map'" class="w-full">
      <app-wardmap [accountId]="accountId()!" (isLoading)="isLoading.set($event)"></app-wardmap>
    </div>
    <div *ngSwitchCase="'efficiency'">
      <app-efficiencymap [accountId]="accountId()!" (isLoading)="isLoading.set($event)"></app-efficiencymap>
    </div>
    <div *ngSwitchCase="'none'">
      <p class="text-center p-10 m-10">Enter steam account id in input field to do scanning.</p>
    </div>
  </ng-container>

  <app-error [errorMessages]="apiErrors()"></app-error>

</div>

<app-loadingspinner [isLoading]="isLoading()"></app-loadingspinner>